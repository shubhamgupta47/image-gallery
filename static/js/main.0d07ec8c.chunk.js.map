{"version":3,"sources":["reducers/photos.js","reducers/errors.js","store/store.js","components/Header.js","utils/constants.js","actions/errors.js","actions/photos.js","components/UploadForm.js","components/HomePage.js","components/Photo.js","components/Gallery.js","components/NotFoundPage.js","router/AppRouter.js","index.js"],"names":["photosReducer","state","action","type","photos","errorsReducer","errors","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","applyMiddleware","thunk","subscribe","console","log","getState","Header","className","to","BASE_API_URL","getErrors","loadPhotos","connect","dispatch","useState","photo","setPhoto","isSubmitted","setIsSubmitted","errorMsg","setErroMsg","useEffect","Fragment","upload_error","Form","onSubmit","event","preventDefault","a","formData","FormData","append","axios","post","headers","response","data","beginAddPhoto","method","encType","Group","Label","Control","name","onChange","file","target","files","Button","variant","disabled","HomePage","Photo","id","Card","Img","src","alt","isLoading","setIsLoading","get","length","get_error","map","_id","NotFoundPage","AppRouter","basename","component","path","exact","Gallery","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0d07ec8c.chunk.js","sourcesContent":["const photosReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"LOAD_PHOTOS\":\n      return action.photos;\n    default:\n      return state;\n  }\n};\n\nexport default photosReducer;\n","const errorsReducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"GET_ERRORS\":\n      return action.errors;\n    default:\n      return state;\n  }\n};\n\nexport default errorsReducer;\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\nimport photosReducer from \"../reducers/photos\";\nimport errorsReducer from \"../reducers/errors\";\nimport thunk from \"redux-thunk\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  combineReducers({\n    photos: photosReducer,\n    errors: errorsReducer,\n  }),\n  composeEnhancers(applyMiddleware(thunk))\n);\n\nstore.subscribe(() => {\n  console.log(store.getState());\n});\n\nexport default store;\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Header = () => (\n  <header>\n    <h1>Photo Gallery App</h1>\n    <div className=\"links\">\n      <NavLink to=\"/\" className=\"link\">\n        Home\n      </NavLink>\n      <NavLink to=\"/gallery\" className=\"link\">\n        Gallery\n      </NavLink>\n    </div>\n  </header>\n);\n\nexport default Header;\n","export const BASE_API_URL = \"https://pratibimb.herokuapp.com\";\n","export const getErrors = (errors) => ({\n  type: \"GET_ERRORS\",\n  errors,\n});\n","import axios from \"axios\";\nimport { BASE_API_URL } from \"../utils/constants\";\nimport { getErrors } from \"./errors\";\n\nexport const beginAddPhoto = (photo) => {\n  return async (dispatch) => {\n    try {\n      const formData = new FormData();\n      formData.append(\"photo\", photo);\n      await axios.post(`${BASE_API_URL}/photos`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n    } catch (error) {\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\n\nexport const startLoadPhotos = () => {\n  return async (dispatch) => {\n    try {\n      const photos = await axios.get(`${BASE_API_URL}/photos`);\n      dispatch(loadPhotos(photos.data));\n    } catch (error) {\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\n\nexport const loadPhotos = (photos) => ({\n  type: \"LOAD_PHOTOS\",\n  photos,\n});\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { beginAddPhoto } from \"../actions/photos\";\n\nconst UploadForm = ({ errors, dispatch }) => {\n  const [photo, setPhoto] = useState(null);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [errorMsg, setErroMsg] = useState(null);\n\n  useEffect(() => {\n    setErroMsg(errors);\n  }, [errors]);\n\n  useEffect(() => {\n    setErroMsg(\"\"); // reset error message on page load\n  }, []);\n\n  const handleOnChange = (event) => {\n    const file = event.target.files[0];\n    setPhoto(file);\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    if (photo) {\n      setErroMsg(\"\");\n      dispatch(beginAddPhoto(photo));\n      setIsSubmitted(true);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {errorMsg && errorMsg.upload_error ? (\n        <p className=\"errorMsg centered-message\">{errorMsg.upload_error}</p>\n      ) : (\n        isSubmitted && (\n          <p className=\"successMsg centered-message\">\n            Photo uploaded successfully.\n          </p>\n        )\n      )}\n      <Form\n        onSubmit={handleFormSubmit}\n        method=\"post\"\n        encType=\"multipart/form-data\"\n        className=\"upload-form\"\n      >\n        <Form.Group>\n          <Form.Label>Choose photo to upload</Form.Label>\n          <Form.Control type=\"file\" name=\"photo\" onChange={handleOnChange} />\n        </Form.Group>\n        <Button\n          variant=\"primary\"\n          type=\"submit\"\n          className={`${!photo ? \"disabled submit-btn\" : \"submit-btn\"}`}\n          disabled={photo ? false : true}\n        >\n          Upload\n        </Button>\n      </Form>\n    </React.Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  photos: state.photos || [],\n  errors: state.errors || {},\n});\n\nexport default connect(mapStateToProps)(UploadForm);\n","import React from \"react\";\nimport UploadForm from \"./UploadForm\";\n\nconst HomePage = () => (\n  <div className=\"home-page\">\n    <UploadForm />\n  </div>\n);\n\nexport default HomePage;\n","import React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { BASE_API_URL } from \"../utils/constants\";\n\nconst Photo = ({ id }) => {\n  return (\n    <Card className=\"photo\">\n      <Card.Img\n        variant=\"top\"\n        src={`${BASE_API_URL}/photos/${id}`}\n        alt=\"Photo\"\n      />\n    </Card>\n  );\n};\n\nexport default Photo;\n","/* eslint-disable react-hooks/exhaustive-deps */\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { startLoadPhotos } from \"../actions/photos\";\nimport Photo from \"./Photo\";\n\nconst Gallery = ({ errors, photos, dispatch }) => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    setIsLoading(true);\n    dispatch(startLoadPhotos());\n  }, []);\n\n  useEffect(() => {\n    if (photos.length > 0) {\n      setIsLoading(false);\n    }\n  }, [photos]);\n\n  return (\n    <div className=\"photos-list\">\n      {errors && errors.get_error && (\n        <p className=\"errorMsg centered-message\">{errors.get_error}</p>\n      )}\n      {isLoading ? (\n        <div className=\"loading-msg centered-message\">Loading...</div>\n      ) : (\n        photos.map((photo) => <Photo key={photo._id} id={photo._id} />)\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  photos: state.photos || [],\n  errors: state.errors || {},\n});\n\nexport default connect(mapStateToProps)(Gallery);\n","import React from \"react\";\n\nconst NotFoundPage = () => (\n  <div>\n    <h3>Page not found</h3>\n  </div>\n);\n\nexport default NotFoundPage;\n","import React from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport Header from \"../components/Header\";\nimport HomePage from \"../components/HomePage\";\nimport Gallery from \"../components/Gallery\";\nimport NotFoundPage from \"../components/NotFoundPage\";\n\nconst AppRouter = () => (\n  <HashRouter basename=\"/\">\n    <div>\n      <Header />\n      <div className=\"main-content\">\n        <Switch>\n          <Route component={HomePage} path=\"/\" exact={true} />\n          <Route component={Gallery} path=\"/gallery\" />\n          <Route component={NotFoundPage} />\n        </Switch>\n      </div>\n    </div>\n  </HashRouter>\n);\n\nexport default AppRouter;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store/store\";\nimport AppRouter from \"./router/AppRouter\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./styles.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppRouter />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}